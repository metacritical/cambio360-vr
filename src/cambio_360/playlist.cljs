(ns cambio-360.playlist
  (:require [WebModule]
            [M3U8]
            [cljsjs.hls]))

(def hls js/Hls)
(def M3U8 js/WebModule.M3U8)

(def plist "\n
   #EXTM3U
   #EXT-X-MEDIA:TYPE=AUDIO,GROUP-ID='audio-0',NAME='Default',AUTOSELECT=YES,DEFAULT=YES,URI='2ce187f5d270e9306be1cdad170cd494/2ce187f5d270e9306be1cdad170cd494_audio_v4.m3u8'
   #EXT-X-I-FRAME-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=75544000,CODECS='avc1.4d0029',URI='2ce187f5d270e9306be1cdad170cd494/2ce187f5d270e9306be1cdad170cd494_HLS_1080_2M_iframe.m3u8'
   #EXT-X-I-FRAME-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=172545000,CODECS='avc1.640029',URI='2ce187f5d270e9306be1cdad170cd494/2ce187f5d270e9306be1cdad170cd494_HLS_1080_15M_iframe.m3u8'
   #EXT-X-I-FRAME-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=147799000,CODECS='avc1.640029',URI='2ce187f5d270e9306be1cdad170cd494/2ce187f5d270e9306be1cdad170cd494_HLS_1080_10M_iframe.m3u8'
   #EXT-X-I-FRAME-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=120799000,CODECS='avc1.640029',URI='2ce187f5d270e9306be1cdad170cd494/2ce187f5d270e9306be1cdad170cd494_HLS_1080_6M_iframe.m3u8'
   #EXT-X-I-FRAME-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=110973000,CODECS='avc1.4d0029',URI='2ce187f5d270e9306be1cdad170cd494/2ce187f5d270e9306be1cdad170cd494_HLS_1080_4M_iframe.m3u8'
   #EXT-X-I-FRAME-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=51520000,CODECS='avc1.4d0029',URI='2ce187f5d270e9306be1cdad170cd494/2ce187f5d270e9306be1cdad170cd494_HLS_1080_1M_iframe.m3u8'
   #EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=2792000,RESOLUTION=1920x960,CODECS='avc1.4d0029,mp4a.40.5',AUDIO='audio-0'
   2ce187f5d270e9306be1cdad170cd494/2ce187f5d270e9306be1cdad170cd494_HLS_1080_2M_v4.m3u8
   #EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=18600000,RESOLUTION=1920x960,CODECS='avc1.640029,mp4a.40.5',AUDIO='audio-0'
   2ce187f5d270e9306be1cdad170cd494/2ce187f5d270e9306be1cdad170cd494_HLS_1080_15M_v4.m3u8
   #EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=12921000,RESOLUTION=1920x960,CODECS='avc1.640029,mp4a.40.5',AUDIO='audio-0'
   2ce187f5d270e9306be1cdad170cd494/2ce187f5d270e9306be1cdad170cd494_HLS_1080_10M_v4.m3u8
   #EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=7412000,RESOLUTION=1920x960,CODECS='avc1.640029,mp4a.40.5',AUDIO='audio-0'
   2ce187f5d270e9306be1cdad170cd494/2ce187f5d270e9306be1cdad170cd494_HLS_1080_6M_v4.m3u8
   #EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=5272000,RESOLUTION=1920x960,CODECS='avc1.4d0029,mp4a.40.5',AUDIO='audio-0'
   2ce187f5d270e9306be1cdad170cd494/2ce187f5d270e9306be1cdad170cd494_HLS_1080_4M_v4.m3u8
   #EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=1434000,RESOLUTION=1920x960,CODECS='avc1.4d0029,mp4a.40.5',AUDIO='audio-0'
   2ce187f5d270e9306be1cdad170cd494/2ce187f5d270e9306be1cdad170cd494_HLS_1080_1M_v4.m3u8")


;; (.log js/console (M3U8.parse plist))

;; (println (M3U8.build (M3U8.parse plist)))

(defn is_supported []
  (println (.isSupported js/Hls)))

